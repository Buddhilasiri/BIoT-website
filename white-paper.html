<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>BioT | White Papers</title>
  <!-- Bootstrap 5 CSS -->
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
    rel="stylesheet"
  />
  <!-- Your existing CSS -->
  <link rel="stylesheet" href="assets/css/styles.css" />
</head>
<body>
  <!-- Navbar (same as your index.html) -->
  <nav class="navbar navbar-expand-lg" id="mainNav">
    <div class="container-fluid">
      <a class="navbar-brand fw-bold d-flex align-items-center" href="index.html">
        <span class="logo-badge">üêùBioT</span>
      </a>
      <button
        class="navbar-toggler text-white"
        type="button"
        data-bs-toggle="collapse"
        data-bs-target="#navbarNav"
        aria-controls="navbarNav"
        aria-expanded="false"
        aria-label="Toggle navigation"
        style="border-color: #fec53c;"
      >
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
        <ul class="navbar-nav">
          <li class="nav-item">
            <a class="nav-link text-white" href="index.html#hero">Home</a>
          </li>
          <li class="nav-item">
            <a class="nav-link text-white" href="index.html#projects">Projects</a>
          </li>
          <li class="nav-item">
            <a class="nav-link text-white" href="index.html#papers">White Papers</a>
          </li>
          <li class="nav-item">
            <a class="nav-link text-white" href="index.html#guides">Guides & Tutorials</a>
          </li>
          <li class="nav-item">
            <a class="nav-link text-white" href="index.html#contact">Contact</a>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- White Papers Section -->
  <section class="py-5 bg-light">
    <div class="container">
      <h2 class="mb-4 text-center text-navy">White Papers</h2>

      <!-- (A) Optionally: a row of categories or filters if you want them in the future -->
      <!--
      <div class="text-center mb-5">
        <button class="btn btn-outline-primary">All</button>
        <button class="btn btn-outline-primary">Edge Computing</button>
        <button class="btn btn-outline-primary">IoT Security</button>
        <button class="btn btn-outline-primary">Healthcare</button>
        ...
      </div>
      -->

      <!-- (B) Cards / Grid Layout for your papers -->
      <div class="row">
        <!-- Paper Card 1 Example -->
        <div class="col-md-6 col-lg-4 mb-4">
          <div class="card h-100 shadow">
            <div class="card-body d-flex flex-column">
              <h5 class="card-title text-navy">
                A Systematic Review of Edge Computing Strategies
              </h5>
              <p class="card-text flex-grow-1">
                <strong>Abstract:</strong><br/>
                This paper explores advanced Edge Computing applications in
                industrial automation, comparing a basic IoT system with a
                cutting-edge, resource-optimized approach for real-time anomaly
                detection and enhanced efficiency.
              </p>
              <div class="mt-auto text-center">
                <!-- Button to view PDF directly in browser -->
                <a
                  href="assets/white-papers/review_paper_wireless.pdf"
                  class="btn btn-outline-primary me-2"
                  target="_blank"
                >
                  View PDF
                </a>
                <!-- Button to open modal for email gating -->
                <button
                  class="btn btn-primary"
                  data-bs-toggle="modal"
                  data-bs-target="#downloadModal"
                  data-paper="review_paper_wireless.pdf"
                >
                  Download
                </button>
              </div>
            </div>
          </div>
        </div>

        <!-- Add more col-md-6 col-lg-4 cards for other papers -->

      </div>
    </div>
  </section>

  <!-- Download Modal (Email Gating) -->
  <div
    class="modal fade"
    id="downloadModal"
    tabindex="-1"
    aria-labelledby="downloadModalLabel"
    aria-hidden="true"
  >
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="downloadModalLabel">
            Please Enter Your Email
          </h5>
          <button
            type="button"
            class="btn-close"
            data-bs-dismiss="modal"
            aria-label="Close"
          ></button>
        </div>
        <form id="downloadForm">
          <div class="modal-body">
            <div class="mb-3">
              <label for="userEmail" class="form-label">Email address</label>
              <input
                type="email"
                class="form-control"
                id="userEmail"
                placeholder="you@example.com"
                required
              />
              <input
                type="hidden"
                id="paperFile"
                name="paperFile"
              />
            </div>
            <p class="small text-muted">
              We'll email you updates and access instructions, ensuring only
              authorized recipients download our White Papers.
            </p>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              data-bs-dismiss="modal"
            >
              Cancel
            </button>
            <button type="submit" class="btn btn-primary">
              Download
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer class="py-3 text-center text-white" id="siteFooter">
    <div class="container">
      <small>
        &copy; <span id="year"></span> BioT. All rights reserved.
      </small>
    </div>
  </footer>

  <!-- Scripts -->
  <script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"
  ></script>
  <script>
    // Auto-update the year
    document.getElementById("year").textContent = new Date().getFullYear();

    // Listen for modal show event to capture which paper is requested
    const downloadModal = document.getElementById('downloadModal');
    downloadModal.addEventListener('show.bs.modal', function (event) {
      const button = event.relatedTarget; // Button that triggered the modal
      const paperFile = button.getAttribute('data-paper'); // e.g. "review_paper_wireless.pdf"
      // Insert the paper filename into a hidden input
      document.getElementById('paperFile').value = paperFile;
    });

    // Handle form submission
    const downloadForm = document.getElementById('downloadForm');
    downloadForm.addEventListener('submit', function (e) {
      e.preventDefault();
      // Grab email & paper file
      const email = document.getElementById('userEmail').value;
      const paperFile = document.getElementById('paperFile').value;

      // TODO: (Option A) Implement logic to store the email in a DB
      // or an external service, or simply log it for demonstration:
      console.log("Email collected:", email);
      console.log("Paper requested:", paperFile);

      // After "collecting" the email, you can automatically trigger the download:
      // Create a temporary link to the PDF:
      const link = document.createElement('a');
      link.href = "assets/papers/" + paperFile; // path to your PDF
      link.download = paperFile; // or any custom name
      link.click();

      // Dismiss the modal
      const modal = bootstrap.Modal.getInstance(downloadModal);
      modal.hide();
      downloadForm.reset();
    });
  </script>
</body>
</html>
